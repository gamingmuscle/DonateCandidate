{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\n\nconst useForm = initFieldValues => {\n  _s();\n\n  const [values, setValues] = useState(initFieldValues);\n  const inputLabel = React.useRef(null);\n  const [labelWidth, setLabelWidth] = React.useState(0);\n  React.useEffect(() => {\n    setLabelWidth(inputLabel.current.offsetWidth);\n  });\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setValues({ ...values,\n      [name]: value\n    });\n  };\n\n  const handleFormSubmit = e => {\n    e.preventDefault();\n    console.log(values);\n\n    if (validateForm({\n      fullName: {\n        required: true,\n        pattern: \"^.{9}.+$\"\n      },\n      email: {\n        required: true,\n        pattern: \"^.*@.*..*$\"\n      },\n      phone: {\n        required: true,\n        pasttern: \"^[0-9- ()]{8,16}$\"\n      }\n    })) {\n      window.alert('Validated');\n    }\n  };\n\n  const [errors, setErrors] = useState({});\n\n  const validateForm = fieldValidation => {\n    //{key:{required: boolean,pattern:...},...}\n    let temp = {};\n    Object.keys(fieldValidation).map((key, i) => {\n      //just check for a value\n      if (fieldValidation[key].required && !values[key]) {\n        temp[key] = values[key] ? \"\" : \"This field is required.\";\n      }\n\n      if (values[key] && fieldValidation[key].pattern) {\n        const regEx = RegExp(fieldValidation[key], \"g\");\n        temp[key] = regEx.test(values[key]) ? \"\" : \"Invalid value\";\n        setErrors({ ...temp\n        });\n      }\n\n      return Object.values(temp).every(x => x == \"\");\n    });\n  };\n\n  return {\n    values,\n    setValues,\n    handleInputChange,\n    inputLabel,\n    labelWidth,\n    setLabelWidth,\n    handleFormSubmit,\n    validateForm,\n    errors,\n    setErrors\n  };\n};\n\n_s(useForm, \"2fC6V6eUcoB0stHCrPp74KbvqgI=\");\n\nexport default useForm;","map":{"version":3,"names":["React","useState","useEffect","useForm","initFieldValues","values","setValues","inputLabel","useRef","labelWidth","setLabelWidth","current","offsetWidth","handleInputChange","e","name","value","target","handleFormSubmit","preventDefault","console","log","validateForm","fullName","required","pattern","email","phone","pasttern","window","alert","errors","setErrors","fieldValidation","temp","Object","keys","map","key","i","regEx","RegExp","test","every","x"],"sources":["C:/Users/Tom/source/repos/donate-candidate-app/src/components/useForm.js"],"sourcesContent":["import React,{useState,useEffect} from \"react\"\r\nconst useForm = (initFieldValues) => {\r\n    const [values,setValues]= useState(initFieldValues)\r\n    const inputLabel = React.useRef(null);\r\n    const [labelWidth,setLabelWidth]= React.useState(0);\r\n    React.useEffect(()=>{setLabelWidth(inputLabel.current.offsetWidth)})\r\n\r\n    const handleInputChange = e =>{\r\n        const {name,value}= e.target\r\n        setValues({\r\n            ...values,\r\n            [name]:value\r\n        })\r\n    }\r\n    const handleFormSubmit = e => {\r\n        e.preventDefault()\r\n        console.log(values);    \r\n        if(validateForm({fullName:{required:true,pattern:\"^.{9}.+$\"},email:{required:true,pattern:\"^.*@.*..*$\"},phone:{required:true,pasttern:\"^[0-9- ()]{8,16}$\"}}))\r\n        {\r\n            window.alert('Validated')\r\n        }\r\n    }\r\n    const [errors,setErrors] = useState({})\r\n\r\n    const validateForm = (fieldValidation) =>{//{key:{required: boolean,pattern:...},...}\r\n        let temp={}\r\n        Object.keys(fieldValidation).map((key,i)=>{//just check for a value\r\n            if(fieldValidation[key].required && !values[key])\r\n            {\r\n                temp[key]=values[key]?\"\":\"This field is required.\"\r\n            }\r\n            if(values[key] && fieldValidation[key].pattern)\r\n            {\r\n                const regEx=RegExp(fieldValidation[key],\"g\")\r\n                temp[key] = regEx.test(values[key])?\"\":\"Invalid value\"\r\n                setErrors({\r\n                    ...temp\r\n                })\r\n            }\r\n            return Object.values(temp).every(x=> x == \"\")\r\n        })\r\n        \r\n    }\r\n    return {\r\n        values,\r\n        setValues,\r\n        handleInputChange,\r\n        inputLabel,\r\n        labelWidth,\r\n        setLabelWidth,\r\n        handleFormSubmit, \r\n        validateForm,\r\n        errors,\r\n        setErrors    \r\n    };\r\n}\r\n\r\nexport default useForm;"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;;AACA,MAAMC,OAAO,GAAIC,eAAD,IAAqB;EAAA;;EACjC,MAAM,CAACC,MAAD,EAAQC,SAAR,IAAoBL,QAAQ,CAACG,eAAD,CAAlC;EACA,MAAMG,UAAU,GAAGP,KAAK,CAACQ,MAAN,CAAa,IAAb,CAAnB;EACA,MAAM,CAACC,UAAD,EAAYC,aAAZ,IAA4BV,KAAK,CAACC,QAAN,CAAe,CAAf,CAAlC;EACAD,KAAK,CAACE,SAAN,CAAgB,MAAI;IAACQ,aAAa,CAACH,UAAU,CAACI,OAAX,CAAmBC,WAApB,CAAb;EAA8C,CAAnE;;EAEA,MAAMC,iBAAiB,GAAGC,CAAC,IAAG;IAC1B,MAAM;MAACC,IAAD;MAAMC;IAAN,IAAcF,CAAC,CAACG,MAAtB;IACAX,SAAS,CAAC,EACN,GAAGD,MADG;MAEN,CAACU,IAAD,GAAOC;IAFD,CAAD,CAAT;EAIH,CAND;;EAOA,MAAME,gBAAgB,GAAGJ,CAAC,IAAI;IAC1BA,CAAC,CAACK,cAAF;IACAC,OAAO,CAACC,GAAR,CAAYhB,MAAZ;;IACA,IAAGiB,YAAY,CAAC;MAACC,QAAQ,EAAC;QAACC,QAAQ,EAAC,IAAV;QAAeC,OAAO,EAAC;MAAvB,CAAV;MAA6CC,KAAK,EAAC;QAACF,QAAQ,EAAC,IAAV;QAAeC,OAAO,EAAC;MAAvB,CAAnD;MAAwFE,KAAK,EAAC;QAACH,QAAQ,EAAC,IAAV;QAAeI,QAAQ,EAAC;MAAxB;IAA9F,CAAD,CAAf,EACA;MACIC,MAAM,CAACC,KAAP,CAAa,WAAb;IACH;EACJ,CAPD;;EAQA,MAAM,CAACC,MAAD,EAAQC,SAAR,IAAqB/B,QAAQ,CAAC,EAAD,CAAnC;;EAEA,MAAMqB,YAAY,GAAIW,eAAD,IAAoB;IAAC;IACtC,IAAIC,IAAI,GAAC,EAAT;IACAC,MAAM,CAACC,IAAP,CAAYH,eAAZ,EAA6BI,GAA7B,CAAiC,CAACC,GAAD,EAAKC,CAAL,KAAS;MAAC;MACvC,IAAGN,eAAe,CAACK,GAAD,CAAf,CAAqBd,QAArB,IAAiC,CAACnB,MAAM,CAACiC,GAAD,CAA3C,EACA;QACIJ,IAAI,CAACI,GAAD,CAAJ,GAAUjC,MAAM,CAACiC,GAAD,CAAN,GAAY,EAAZ,GAAe,yBAAzB;MACH;;MACD,IAAGjC,MAAM,CAACiC,GAAD,CAAN,IAAeL,eAAe,CAACK,GAAD,CAAf,CAAqBb,OAAvC,EACA;QACI,MAAMe,KAAK,GAACC,MAAM,CAACR,eAAe,CAACK,GAAD,CAAhB,EAAsB,GAAtB,CAAlB;QACAJ,IAAI,CAACI,GAAD,CAAJ,GAAYE,KAAK,CAACE,IAAN,CAAWrC,MAAM,CAACiC,GAAD,CAAjB,IAAwB,EAAxB,GAA2B,eAAvC;QACAN,SAAS,CAAC,EACN,GAAGE;QADG,CAAD,CAAT;MAGH;;MACD,OAAOC,MAAM,CAAC9B,MAAP,CAAc6B,IAAd,EAAoBS,KAApB,CAA0BC,CAAC,IAAGA,CAAC,IAAI,EAAnC,CAAP;IACH,CAdD;EAgBH,CAlBD;;EAmBA,OAAO;IACHvC,MADG;IAEHC,SAFG;IAGHO,iBAHG;IAIHN,UAJG;IAKHE,UALG;IAMHC,aANG;IAOHQ,gBAPG;IAQHI,YARG;IASHS,MATG;IAUHC;EAVG,CAAP;AAYH,CAtDD;;GAAM7B,O;;AAwDN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}